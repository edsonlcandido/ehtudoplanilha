import{c as a,i as c,r as l,p as d}from"./auth.js";/* empty css     */let e;function r(){if(a.isDevelopment&&console.log("[Login] Página inicializada em modo desenvolvimento"),c()){l();return}if(e={form:document.getElementById("login-form"),emailInput:document.getElementById("email"),passwordInput:document.getElementById("password"),loginBtn:document.getElementById("login-btn"),errorMsg:document.getElementById("errorMsg"),successMsg:document.getElementById("successMsg")},!u()){console.error("[Login] Elementos do DOM não encontrados");return}m()}function u(){return!!(e.form&&e.emailInput&&e.passwordInput&&e.loginBtn&&e.errorMsg&&e.successMsg)}function m(){e.form.addEventListener("submit",g)}async function g(t){t.preventDefault();const o=e.emailInput.value.trim(),n=e.passwordInput.value;if(!o||!n){s("Por favor, preencha todos os campos");return}if(!E(o)){s("Por favor, insira um e-mail válido");return}await f(o,n)}async function f(t,o){i(!0),y();try{const n=await d.collection("users").authWithPassword(t,o);a.isDevelopment&&console.log("[Login] Login bem-sucedido:",n.record.email),p("Login realizado com sucesso! Redirecionando..."),setTimeout(()=>{l()},1e3)}catch(n){console.error("[Login] Erro ao fazer login:",n),n.status===400?s("E-mail ou senha incorretos"):n.status===0?s("Erro de conexão. Verifique sua internet"):s("Erro ao realizar login. Tente novamente"),i(!1)}}function i(t){e.loginBtn.disabled=t,e.emailInput.disabled=t,e.passwordInput.disabled=t,t?e.loginBtn.textContent="Entrando...":e.loginBtn.textContent="Entrar"}function s(t){e.errorMsg.textContent=t,e.errorMsg.style.display="block",e.successMsg.style.display="none"}function p(t){e.successMsg.textContent=t,e.successMsg.style.display="block",e.errorMsg.style.display="none"}function y(){e.errorMsg.style.display="none",e.successMsg.style.display="none"}function E(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",r):r();
